<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
        }

        .sidebar {
            min-height: 100vh;
            width: 250px;
            background-color: #343a40;
            padding: 20px;
            color: white;
            position: fixed;
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px;
            font-size: 16px;
        }

        .sidebar a:hover {
            background-color: #495057;
            border-radius: 5px;
        }

        .main-content {
            margin-left: 270px;
            padding: 20px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .table img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
        }

        .btn-custom {
            background-color: #7366ff;
            border-color: #7366ff;
            color: white;
            border-radius: 20px;
        }

        .btn-custom:hover {
            background-color: #5a50d8;
            border-color: #5a50d8;
        }

        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(0, 0, 0, .05);
        }

        .badge-active {
            background-color: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
        }

        .badge-inactive {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
        }

        .table th, .table td {
            vertical-align: middle;
        }

        .action-icons .fa {
            margin-right: 10px;
            color: #343a40;
        }

        .action-icons .fa:hover {
            color: #7366ff;
        }

        /* Adjustments for responsive design */
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 10px;
            }

            .sidebar {
                width: 100%;
                position: relative;
            }
        }

        .search-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-bar input {
            width: 250px;
            margin-right: 10px;
        }

    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <h3 class="mb-4">Admin Dashboard</h3>
        <a href="#" onclick="showSection('productSection')"><i class="fas fa-box-open"></i> Products</a>
        <a href="#" onclick="showSection('categorySection')"><i class="fas fa-list"></i> Categories</a>
        <a href="#" onclick="showSection('userSection')"><i class="fas fa-users"></i> Users</a>
        <a href="#" onclick="showSection('manageProfileSection')"><i class="fas fa-user-cog"></i> Manage Profile</a>
        <a href="#" onclick="showSection('voucherSection')"><i class="fas fa-gift"></i> Vouchers</a>
        <a href="#" onclick="showSection('contactSection')"><i class="fas fa-envelope"></i> Contact</a>
        <a href="#" onclick="showSection('chatSection')"><i class="fas fa-comments"></i> Chat</a>
        <a href="#" onclick="showSection('pointSystemSection')"><i class="fas fa-star"></i> Point System</a>
    </div>

    <div class="main-content">
        <!-- Product Section -->
        <section id="productSection" class="section active">
            <h2>Products</h2>
            <div class="search-bar mb-3">
                <button class="btn btn-custom" onclick="showSection('addProductForm')">+ Add Product</button>
                <input type="search" class="form-control" placeholder="Search Products...">
                <button class="btn btn-light">Import</button>
                <button class="btn btn-light">Export</button>
            </div>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Category</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="product">
                  
                </tbody>
            </table>
        </section>
<!-- Add Product Form -->
<section id="addProductForm" class="section">
    <h2>Add Product</h2>
    <form id="AddProduct">
        <div class="mb-3">
            <label for="productName" class="form-label">Product Name</label>
            <input type="text" class="form-control" id="productName" name="Name">
        </div>
        <div class="mb-3">
            <label for="productImage" class="form-label">Product Image</label>
            <input type="file" class="form-control" id="productImage" name="Image">
        </div>
        <div class="mb-3">
            <label for="productPrice" class="form-label">Product Price</label>
            <input type="number" class="form-control" id="productPrice" name="Price">
        </div>
        <div class="mb-3">
            <label for="productDescription" class="form-label">Product Description</label>
            <textarea class="form-control" id="productDescription" name="Description"></textarea>
        </div>
        <div class="mb-3">
            <label for="productDiscount" class="form-label">Product Discount</label>
            <input type="number" class="form-control" id="productDiscount" name="PriceWithDiscount">
        </div>
        <div class="mb-3">
            <label for="productBrand" class="form-label" name="Brand">Product Brand</label>
            <input type="text" class="form-control" id="productBrand">
        </div>
        <button type="submit" class="btn btn-custom" onclick="addproduct()">Add Product</button>
        <button type="button" class="btn btn-secondary" onclick="showSection('productSection')">Cancel</button>
    </form>
</section>


        <!-- Add Product Form -->
        <!-- <section id="addProductForm" class="section">
            <h2>Add Product</h2>
            <form id="AddProduct">
                <div class="mb-3">
                    <label for="productName" class="form-label">Product Name</label>
                    <input type="text" class="form-control" id="productName" name="Name">
                </div>
                <div class="mb-3">
                    <label for="productImage" class="form-label">Product Image</label>
                    <input type="file" class="form-control" id="productImage" name="Image">
                </div>
                <div class="mb-3">
                    <label for="productPrice" class="form-label">Product Price</label>
                    <input type="number" class="form-control" id="productPrice" name="Price">
                </div>
                <div class="mb-3">
                    <label for="productDescription" class="form-label">Product Description</label>
                    <textarea class="form-control" id="productDescription" name="Description"></textarea>
                </div>
                <div class="mb-3">
                    <label for="productDiscount" class="form-label">Product Discount</label>
                    <input type="number" class="form-control" id="productDiscount" name="PriceWithDiscount">
                </div>
                <div class="mb-3">
                    <label for="productBrand" class="form-label" name="Brand">Product Brand</label>
                    <input type="text" class="form-control" id="productBrand">
                </div>
                <button type="submit" class="btn btn-custom">Add Product</button>
                <button type="button" class="btn btn-secondary" onclick="showSection('productSection')">Cancel</button>
            </form>
        </section> -->
        <!-- <section id="addProductForm" class="section"></section>
            <h2>Add Product</h2>
            <form id="AddProduct">
                <div class="mb-3">
                    <label for="productName" class="form-label">Product Name</label>
                    <input type="text" class="form-control" id="productName" name="Name">
                </div>
                <div class="mb-3">
                    <label for="productImage" class="form-label">Product Image</label>
                    <input type="file" class="form-control" id="productImage" name="Image">
                </div>
                <div class="mb-3">
                    <label for="productPrice" class="form-label">Product Price</label>
                    <input type="number" class="form-control" id="productPrice" name="Price">
                </div>
                <div class="mb-3">
                    <label for="productDescription" class="form-label">Product Description</label>
                    <textarea class="form-control" id="productDescription" name="Description"></textarea>
                </div>
                <div class="mb-3">
                    <label for="productDiscount" class="form-label">Product Discount</label>
                    <input type="number" class="form-control" id="productDiscount" name="PriceWithDiscount">
                </div>
                <div class="mb-3">
                    <label for="productBrand" class="form-label" name="Brand">Product Brand</label>
                    <input type="text" class="form-control" id="productBrand">
                </div>
                <button type="submit" class="btn btn-custom" onclick="addproduct()">Add Product</button>
                <button type="button" class="btn btn-secondary" onclick="showSection('productSection')">Cancel</button>
            </form>
        </section> -->
         <!-- Add Product Form -->
         <!-- <section id="addProductForm" class="section">
            <h2>Add Product</h2>
            <form id="AddProduct">
                <div class="mb-3">
                    <label for="productName" class="form-label" nam>Product Name</label>
                    <input type="text" class="form-control" id="productName">
                </div>
                <div class="mb-3">
                    <label for="productImage" class="form-label">Product Image</label>
                    <input type="file" class="form-control" id="productImage">
                </div>
                <div class="mb-3">
                    <label for="productPrice" class="form-label">Product Price</label>
                    <input type="number" class="form-control" id="productPrice">
                </div>
                <div class="mb-3">
                    <label for="productDescription" class="form-label">Product Description</label>
                    <textarea class="form-control" id="productDescription"></textarea>
                </div>
                <div class="mb-3">
                    <label for="productDiscount" class="form-label">Product Discount</label>
                    <input type="number" class="form-control" id="productDiscount">
                </div>
                <div class="mb-3">
                    <label for="productBrand" class="form-label">Product Brand</label>
                    <input type="text" class="form-control" id="productBrand">
                </div>
                <button type="submit" class="btn btn-success" onclick="">Add Product</button>
                <button type="button" class="btn btn-secondary" onclick="showSection('productSection')">Cancel</button>
            </form>
        </section> -->
        <!-- Additional sections can be added here -->

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script>
        function showSection(sectionId) {
    // إخفاء جميع الأقسام
    const sections = document.querySelectorAll('.section');
    sections.forEach(section => {
        section.classList.remove('active');
        section.style.display = 'none'; // إخفاء القسم
    });

    // عرض القسم المطلوب فقط
    const activeSection = document.getElementById(sectionId);
    activeSection.classList.add('active');
    activeSection.style.display = 'block'; // عرض القسم
}

        async function productGet()
    {
        const url = 'https://localhost:44367/api/AdminControllers/ProductAll';
        let response = await fetch(url);
        let data = await response.json();

        let productTable = document.getElementById('product');
        data.forEach(element =>

        productTable.innerHTML += `
          <tr>
                        <td><img src="${element.image}" class="img-thumbnail" alt="Product Image"></td>
                        <td>${element.brand}</td>
                        <td>${element.name}</td>
                        <td>${element.price}</td>
                        <td><span class="badge badge-active">Active</span></td>
                        <td class="action-icons">
                            <i class="fas fa-eye" ></i>
                            <a href="EditProduct.html" class="btn btn-warning fas fa-pencil-alt" >Edit</a>
                            <button class="btn btn-warning fas fa-pencil-alt" onclick="productEdit(${element.productId})">Edit</button>
                            <button class="btn btn-danger fas fa-trash" onclick="productDelete(${element.productId})">Delete</button>
                        </td>
                    </tr>

          
                `

        )
    }
    productGet();

    async  function productDelete(id) {
        debugger;
        
            const urlDelete = `https://localhost:44367/api/AdminControllers/Product?id=${id}`;
          await fetch(urlDelete, {
                    method: "DELETE",
                    
                });

                window.alert("Cart deleted successfully");
        //   alert("Success")
        
        }

        
        async function addproduct(){
            const url="https://localhost:44367/api/AdminControllers/Product";
            var form=document.getElementById("AddProduct");

        event.preventDefault();
        var formData= new FormData(form);
        let response=await fetch(url,{
            method:"POST",
            body:formData,
        });
        var data=response;

        showSection('productSection');
}


async function EditProduct(id){

const url=`https://localhost:44367/api/AdminControllers/Product?id=${id}`;

var form=document.getElementById("form");
    // هاي بتمنع يصير ريللود على صفحة ثانية
event.preventDefault();
var formData= new FormData(form);
let response=await fetch(url,{
    method:"PUT",
    body:formData,
});
var data=await response.json();
}
    </script>